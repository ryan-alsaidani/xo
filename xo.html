<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XO Game</title>
    <style>
        /* إعدادات أساسية */
        body {
            margin: 0;
            padding: 0;
            background-color: #000;
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            min-height: 100vh;
            color: white;
            padding-top: 20px;
        }

        h1, h6 {
            margin: 10px 0;
            text-align: center;
        }

        h6 {
            font-size: 0.9rem;
            color: #ccc;
        }

        #title {
            color: #0074FF;
            font-size: 2rem;
        }

        #sc mark {
            display: block;
            padding: 5px 10px;
            margin: 5px 0;
            border-radius: 5px;
            font-size: 1rem;
        }

        #bw {
            background-color: white;
            color: black;
        }

        #m {
            background-color: #000;
            color: #0074FF;
        }

        #mark {
            background-color: #000;
            color: #00FDFF;
        }

        table {
            border-collapse: collapse;
            width: 90%;
            max-width: 500px;
            margin: 20px 0;
        }

        td {
            border: 3px solid white;
            width: 33.33%;
            height: 120px;
            text-align: center;
            vertical-align: middle;
            padding: 0;
        }

        img {
            width: 80%;
            height: 80%;
            object-fit: contain;
            cursor: pointer;
            transition: transform 0.1s ease;
        }

        img:hover {
            transform: scale(1.05);
        }

        button {
            color: white;
            background-color: black;
            border: 3px solid white;
            border-radius: 8px;
            padding: 10px 20px;
            font-size: 1rem;
            margin: 10px 5px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        button:hover {
            background-color: white;
            color: black;
        }

        @media (max-width: 500px) {
            td {
                height: 100px;
            }

            img {
                width: 70%;
                height: 70%;
            }

            h1 {
                font-size: 1.5rem;
            }

            button {
                font-size: 0.9rem;
                padding: 8px 15px;
            }
        }
    </style>
</head>
<body>
    <h1 id="title">Player 1 round -> X</h1>

    <h1 id="sc">
        <mark id="bw">Score</mark>
        <mark id="m">Player 1: 0</mark>
        <mark id="mark">Player 2: 0</mark>
    </h1>

    <h6>Tap on any block to play</h6>

    <table id="table">
        <tr>
            <td><img src="p.png" id="cell1" onclick="photoChanger(changePlayer(),'cell1')"></td>
            <td><img src="p.png" id="cell2" onclick="photoChanger(changePlayer(),'cell2')"></td>
            <td><img src="p.png" id="cell3" onclick="photoChanger(changePlayer(),'cell3')"></td>
        </tr>
        <tr>
            <td><img src="p.png" id="cell4" onclick="photoChanger(changePlayer(),'cell4')"></td>
            <td><img src="p.png" id="cell5" onclick="photoChanger(changePlayer(),'cell5')"></td>
            <td><img src="p.png" id="cell6" onclick="photoChanger(changePlayer(),'cell6')"></td>
        </tr>
        <tr>
            <td><img src="p.png" id="cell7" onclick="photoChanger(changePlayer(),'cell7')"></td>
            <td><img src="p.png" id="cell8" onclick="photoChanger(changePlayer(),'cell8')"></td>
            <td><img src="p.png" id="cell9" onclick="photoChanger(changePlayer(),'cell9')"></td>
        </tr>
    </table>

    <div>
        <button onclick="reset()">Remove Score</button>
        <button onclick="location.reload();">New Game</button>
    </div>

    <script>
        // الكود نفسه بدون تغيير
        let scoreH = document.getElementById("sc");
        let score = {p1: 0, p2: 0};
        score.p1 = JSON.parse(localStorage.getItem('p1')) || 0;
        score.p2 = JSON.parse(localStorage.getItem('p2')) || 0;

        let roundN = 1;
        let title = document.getElementById("title");
        let bord = {
            cell1: 0, cell2: 0, cell3: 0,
            cell4: 0, cell5: 0, cell6: 0,
            cell7: 0, cell8: 0, cell9: 0
        };

        function photoChangerManager(photoId) {
            return !bord[photoId];
        }

        function showScore() {
            scoreH.innerHTML = `<mark id="bw">Score :</mark>
                                <mark id="m">Player 1: ${score.p1}</mark>
                                <mark id="mark">Player 2: ${score.p2}</mark>`;
        }
        showScore();

        function changePlayer() {
            if (roundN === 1) {
                title.textContent = 'Player 2 round -> O';
                title.style.color = '#00FDFF';
                roundN--;
                return 1;
            } else {
                title.textContent = 'Player 1 round -> X';
                title.style.color = '#0074FF';
                roundN++;
                return 2;
            }
        }

        function photoChanger(playerNumber, photoId) {
            let photoWillChange = document.getElementById(photoId);
            if (playerNumber === 1 && photoChangerManager(photoId)) {
                photoWillChange.src = "bx.jpg";
                bordChanger(playerNumber, photoId);
            } else if (playerNumber === 2 && photoChangerManager(photoId)) {
                photoWillChange.src = "bo.jpg";
                bordChanger(playerNumber, photoId);
            }
        }

        function bordChanger(playerNumber, photoId) {
            bord[photoId] = playerNumber;
            let winner = gameJudj(playerNumber);
            if (winner === 1) {
                alert('Player 1 (X) wins!');
                score.p1++;
            } else if (winner === 2) {
                alert('Player 2 (O) wins!');
                score.p2++;
            }
            localStorage.setItem('p1', JSON.stringify(score.p1));
            localStorage.setItem('p2', JSON.stringify(score.p2));
            showScore();
        }

        function gameJudj(playerNumber) {
            const b = bord;
            if (
                (b.cell1 && b.cell1 === b.cell2 && b.cell2 === b.cell3) ||
                (b.cell4 && b.cell4 === b.cell5 && b.cell5 === b.cell6) ||
                (b.cell7 && b.cell7 === b.cell8 && b.cell8 === b.cell9) ||
                (b.cell1 && b.cell1 === b.cell4 && b.cell4 === b.cell7) ||
                (b.cell2 && b.cell2 === b.cell5 && b.cell5 === b.cell8) ||
                (b.cell3 && b.cell3 === b.cell6 && b.cell6 === b.cell9) ||
                (b.cell1 && b.cell1 === b.cell5 && b.cell5 === b.cell9) ||
                (b.cell3 && b.cell3 === b.cell5 && b.cell5 === b.cell7)
            ) {
                return playerNumber;
            }
        }

        function reset() {
            score = {p1: 0, p2: 0};
            localStorage.setItem('p1', JSON.stringify(score.p1));
            localStorage.setItem('p2', JSON.stringify(score.p2));
            showScore();
        }
    </script>
</body>
</html>